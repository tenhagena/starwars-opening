<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" media="screen" href="css/styles.css" />
        <script src="lib/modernizr.custom.96959.js"></script>
        <script src="lib/prefixfree.min.js"></script>
    </head>
    <body>
        <div id="loading">Loading...</div>
        <div class="bg">
            <div class="deathstar"></div>
        </div>
        <div id="supported">
            <div id="main-title"><img src="images/rm.png" /></div>
            <div class="box">   
                <h1>STARWARS OPENING CRAWL - CSS3 & HTML5</h1>
                <a href="https://github.com/tanguy-martin/starwars-opening">Github repository</a><br />
            </div>
            <div id="wrapper">
                <div id="intro">A long time ago, in a galaxy far, far, away....</div>
                <div id="crawling-txt">
                    <div class="text">
                        <div class="inner-txt">
                            <p class="episode">Episode II</p>
                            <p class="subtitle">Rickmancing the Stone</p>
                            <p>To get away from Jerry, who is saying goodbye 
                            after his divorce from Beth, Rick takes Morty 
                            and Summer to a Mad Max-esque Earth warrior 
                            group known as the Death Stalkers in search 
                            of samples of the powerful Isotope 322. </p>
                            <p>Summer finds herself enamored by this world
                            and the Death Stalkers leader Hemorrhage, while
                            Morty, as part of Rick's plan, is given a giant
                            dismembered arm's strength.</p>
                            <p>Morty's new muscle came with the memories
                            of its original owner, who takes Morty 
                            in search of his killer... </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="unsupported">Your browser doesn't seem to support CSS 3D transforms or HTML5 audio. </div>
        <script>
            /**
             * This snippet of JS code takes care of the preloading of the audio files
             * and start the animation once the browser is ready to play
             * the audio. That way we are sure that the audio is in sync
             * with the animation.
             *
             * If the browser cannot play audio files, the animation won't run.
            **/
            (function() {
                var audio = document.createElement('audio'),
                    done = function(classname) {
                        document.body.className = classname;
                    };

                if (audio == null || !audio.canPlayType) {
                    done('problem');
                    return;
                } 

                if (audio.canPlayType('audio/mpeg')) {
                    audio.src = 'audio/intro.mp3';
                } else if (audio.canPlayType('audio/ogg')) {
                    audio.src = 'audio/intro.ogg';
                    audio.preload = 'auto';
                } else {
                    done('problem');
                    return;
                }

                document.body.appendChild(audio);

                audio.addEventListener('canplaythrough', function () {
                    audio.play();
                    done('running');
                }, false);

            }());
        </script
    </body>
</html>
